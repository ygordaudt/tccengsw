import{ap as k,i as C,av as E,aw as Q,c as _,j as O,k as A,a as V,ai as T,aj as $,af as j,r as y,d as B,w as l,b as D,o as L,f as e,e as r,ag as N,u as d,ac as R,Q as U,h as g}from"./index.eebabf12.js";import{a as I,Q as P}from"./QForm.a8ddffd9.js";import{Q as z}from"./QCardSection.89aa27a3.js";import{Q as F}from"./QCard.1aa3c8a2.js";import{u as G}from"./use-quasar.9e31e6d4.js";import{r as x}from"./fieldRules.141a7f49.js";import"./use-key-composition.132130d5.js";import"./use-dark.a19af4ca.js";import"./focus-manager.33224ae2.js";const M=s=>{if(!s.response)s.hasOwnProperty("message")?n(s.message):n("Falha de conex\xE3o, tente novamente mais tarde!");else if(s.response.hasOwnProperty("message"))n(s.response.message);else if(s.response.hasOwnProperty("data")){const t=s.response.data;if(t&&Array.isArray(t))t.forEach((o,a)=>n(o[o.keys(t)[a]]));else if(t){const o=t[Object.keys(t)[0]];if(Array.isArray(o))return o.forEach(c=>n(c));const a=H(s);n(a||t[Object.keys(t)[0]])}}else n("Ocorreu um erro inesperado, tente novamente mais tarde!")},n=s=>{k.create({message:s,color:"negative",textColor:"white"})},H=s=>({401:"Usu\xE1rio n\xE3o autorizado! Verifique seu login e senha.",403:"Acesso negado! Este usu\xE1rio n\xE3o tem permiss\xE3o para acessar este recurso!",404:"Recurso n\xE3o encontrado!",422:"Falha de valida\xE7\xE3o!",500:"Ocorreu um erro inesperado, tente novamente mais tarde!"})[s.response.status];var J=C({name:"QCardActions",props:{...E,vertical:Boolean},setup(s,{slots:t}){const o=Q(s),a=_(()=>`q-card__actions ${o.value} q-card__actions--${s.vertical===!0?"vert column":"horiz row"}`);return()=>O("div",{class:a.value},A(t.default))}});const K={class:"row"},W={class:"col-0 col-sm-5 bg-primary rounded-left-borders"},X={class:"row q-ml-sm q-mt-sm"},Y={class:"col-12 fredoka text-subtitle1"},Z=g("TCC Eng. Sw. "),ee=e("div",{class:"row full-width q-px-xl q-pb-xl full-height flex flex-center"},[e("div",null,[e("div",{class:"text-h4 text-uppercase text-white fredoka",style:{"min-width":"220px"}},"Opss!"),e("div",{class:"text-white q-my-sm text-subtitle1"},"Sua sess\xE3o expirou. Informe sua senha senha para desbloquear. ")])],-1),se={class:"col-12 col-sm-7"},te={class:"row q-ml-sm q-mt-sm sm-and-up-hide"},oe={class:"col-12 fredoka text-subtitle1"},ae=g("TCC Eng. Sw. "),re={class:"row q-pa-sm-sm q-pa-md"},ne={class:"col-12"},le={class:"q-mb-xl"},ie={class:"flex justify-center"},ce={class:"text-h4 text-uppercase q-my-none text-weight-bold text-primary fredoka"},xe={name:"LockScreen",setup(s){const t=V(),o=T();G();const a=$(),c=j(),h=_(()=>t.getUser),w=_(()=>o.isLoading),m=y(""),u=y("password"),b=h.value,q=async()=>{try{o.ADD_REQUEST(),await t.DO_LOGIN({username:h.value.username,password:m.value});let i=a.query.to||"/admin";c.push({path:i})}catch(p){M(p),o.REMOVE_REQUEST()}},S=()=>t.SIGN_OUT().then(()=>c.push("/login"));return(p,i)=>{const f=D("router-link");return L(),B(F,{class:"q-mx-xl"},{default:l(()=>[e("div",K,[e("div",W,[e("div",X,[e("div",Y,[r(f,{class:"text-white",style:{"text-decoration":"none"},to:"/"},{default:l(()=>[Z]),_:1})])]),ee]),e("div",se,[e("div",te,[e("div",oe,[r(f,{class:"text-primary",style:{"text-decoration":"none"},to:"/"},{default:l(()=>[ae]),_:1})])]),e("div",re,[e("div",ne,[r(P,{onSubmit:q},{default:l(()=>[r(z,null,{default:l(()=>[e("div",le,[e("div",ie,[e("div",ce,N(d(b).username),1)])]),r(I,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=v=>m.value=v),rules:[d(x).required,d(x).minLength(6)],type:u.value?"password":"text","lazy-rules":"",placeholder:"Senha"},{append:l(()=>[r(R,{name:u.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:i[0]||(i[0]=v=>u.value=!u.value)},null,8,["name"])]),_:1},8,["modelValue","rules","type"])]),_:1}),r(J,null,{default:l(()=>[r(U,{loading:d(w),class:"text-capitalize full-width",color:"primary",label:"Desbloquear",push:"",type:"submit"},null,8,["loading"]),e("div",{class:"q-mt-sm"},[e("a",{class:"text-primary",href:"#",onClick:S},"Entrar com outro usu\xE1rio")])]),_:1})]),_:1})])])])])]),_:1})}}};export{xe as default};
